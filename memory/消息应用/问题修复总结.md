# å›¾ç‰‡é…ç½®å¼¹çª—é—®é¢˜ä¿®å¤æ€»ç»“

## å·²ä¿®å¤çš„é—®é¢˜

### âœ… 1. å›¾ç‰‡æŒ‰é’®å›¾æ ‡é—®é¢˜
**é—®é¢˜**: ä½¿ç”¨emojiå›¾æ ‡ğŸ–¼ï¸æ˜¾ç¤ºä¸ä¸€è‡´
**è§£å†³æ–¹æ¡ˆ**: æ›¿æ¢ä¸ºFont Awesomeå›¾æ ‡
```javascript
// ä¿®æ”¹å‰
imageConfigBtn.innerHTML = 'ğŸ–¼ï¸';

// ä¿®æ”¹å  
imageConfigBtn.innerHTML = '<i class="fas fa-image"></i>';
```

### âœ… 2. æ¶ˆæ¯èƒŒæ™¯é¢„è§ˆæ¯”ä¾‹é—®é¢˜
**é—®é¢˜**: æ¨ªå‘é•¿æ–¹å½¢ä¸åŒ¹é…å®é™…æ¶ˆæ¯åˆ—è¡¨æ¯”ä¾‹
**è§£å†³æ–¹æ¡ˆ**: æ”¹ä¸ºç«–å‘é•¿æ–¹å½¢
```css
/* ä¿®æ”¹å‰ */
.background-preview {
  width: 120px;
  height: 80px;
}

/* ä¿®æ”¹å */
.background-preview {
  width: 90px;
  height: 120px;
}
```

### âœ… 3. ç”¨æˆ·å¤´åƒé¢„è§ˆåŒºåŸŸå¤§å°é—®é¢˜
**é—®é¢˜**: é¢„è§ˆåŒºåŸŸå¤ªå°ï¼Œæ‹–æ‹½æ“ä½œä¸ä¾¿
**è§£å†³æ–¹æ¡ˆ**: å¢å¤§é¢„è§ˆåŒºåŸŸ
```css
/* ä¿®æ”¹å‰ */
.avatar-preview {
  width: 80px;
  height: 80px;
}

/* ä¿®æ”¹å */
.avatar-preview {
  width: 100px;
  height: 100px;
}
```

### âœ… 4. å¼¹çª—å®šä½åŸºå‡†é—®é¢˜
**é—®é¢˜**: å¼¹çª—ç›¸å¯¹äºæµè§ˆå™¨é¡µé¢å®šä½ï¼Œä¸åœ¨æ‰‹æœºå®¹å™¨å†…
**è§£å†³æ–¹æ¡ˆ**: æ”¹ä¸ºç›¸å¯¹æ‰‹æœºå®¹å™¨å®šä½
```css
/* ä¿®æ”¹å‰ */
.image-config-modal {
  position: fixed;
}

/* ä¿®æ”¹å */
.image-config-modal {
  position: absolute;
}
```

```javascript
// ç¡®ä¿æ‰‹æœºå®¹å™¨æœ‰ç›¸å¯¹å®šä½
const phoneContainer = document.querySelector('.phone-container');
if (phoneContainer) {
  if (getComputedStyle(phoneContainer).position === 'static') {
    phoneContainer.style.position = 'relative';
  }
  phoneContainer.appendChild(this.modalElement);
}
```

### âœ… 5. æ ‡ç­¾é¡µåç§°é—®é¢˜
**é—®é¢˜**: "æ¶ˆæ¯èƒŒæ™¯"åç§°ä¸å¤Ÿå‡†ç¡®
**è§£å†³æ–¹æ¡ˆ**: æ”¹ä¸º"æ¶ˆæ¯ä¸»é¡µèƒŒæ™¯"
```javascript
// ä¿®æ”¹å‰
æ¶ˆæ¯èƒŒæ™¯

// ä¿®æ”¹å
æ¶ˆæ¯ä¸»é¡µèƒŒæ™¯
```

### âœ… 6. æ‹–æ‹½è°ƒæ•´åº”ç”¨é—®é¢˜ï¼ˆæ ¸å¿ƒé—®é¢˜ï¼‰
**é—®é¢˜**: æ‹–æ‹½è°ƒæ•´åçš„ä½ç½®é…ç½®æ— æ³•åº”ç”¨åˆ°å®é™…èŠå¤©é¡µé¢
**æ ¹æœ¬åŸå› **: StyleConfigManagerçš„CSSç”Ÿæˆå‡½æ•°ç¡¬ç¼–ç äº†`background-position: center`

**è§£å†³æ–¹æ¡ˆ**: ä¿®å¤CSSç”Ÿæˆé€»è¾‘ï¼Œæ”¯æŒbackgroundPositioné…ç½®

#### 6.1 ä¿®å¤generateAvatarCSSå‡½æ•°
```javascript
// ä¿®æ”¹å‰
return `
${selector} {
    background-position: center !important;
}`;

// ä¿®æ”¹å
const backgroundPosition = avatarConfig.backgroundPosition || 'center center';
return `
${selector} {
    background-position: ${backgroundPosition} !important;
}`;
```

#### 6.2 ä¿®å¤æ¶ˆæ¯èƒŒæ™¯CSSç”Ÿæˆ
```javascript
// ä¿®æ”¹å‰
background-position: center !important;

// ä¿®æ”¹å
background-position: ${config.messagesApp.backgroundPosition || 'center center'} !important;
```

#### 6.3 æ›´æ–°é»˜è®¤é…ç½®ç»“æ„
```javascript
// æ·»åŠ backgroundPositionå­—æ®µåˆ°æ‰€æœ‰ç›¸å…³é…ç½®
messageSentAvatar: {
    backgroundImage: '',
    backgroundImageUrl: '',
    backgroundPosition: 'center center',  // æ–°å¢
    rotation: '0',
    scale: '1',
    description: 'å‘é€æ¶ˆæ¯å¤´åƒèƒŒæ™¯'
},
messagesApp: {
    backgroundImage: '',
    backgroundImageUrl: '',
    backgroundPosition: 'center center',  // æ–°å¢
    description: 'æ¶ˆæ¯åº”ç”¨èƒŒæ™¯'
}
```

## æŠ€æœ¯ç»†èŠ‚

### æ‹–æ‹½ä½ç½®è½¬æ¢é€»è¾‘
```javascript
// æ‹–æ‹½åæ ‡è½¬æ¢ä¸ºCSS background-position
formatBackgroundPosition(position) {
    return `${position.x}% ${position.y}%`;
}

// æ‹–æ‹½å¤„ç†
const newX = Math.max(0, Math.min(100, this.dragStartImagePos.x - deltaX));
const newY = Math.max(0, Math.min(100, this.dragStartImagePos.y - deltaY));
this.currentConfig[this.currentTab].position = { x: newX, y: newY };
```

### é…ç½®ä¿å­˜æµç¨‹
1. ç”¨æˆ·åœ¨å¼¹çª—ä¸­è°ƒæ•´å›¾ç‰‡ä½ç½®
2. å®æ—¶æ›´æ–°å†…éƒ¨é…ç½® `this.currentConfig`
3. ç‚¹å‡»ä¿å­˜æ—¶è½¬æ¢ä¸ºStyleConfigManageræ ¼å¼
4. è°ƒç”¨StyleConfigManager.saveConfig()
5. StyleConfigManagerç”ŸæˆåŒ…å«backgroundPositionçš„CSS
6. åº”ç”¨åˆ°é¡µé¢ï¼Œå®é™…å¤´åƒä½ç½®æ›´æ–°

## éªŒè¯æ–¹æ³•

### 1. åŸºç¡€åŠŸèƒ½éªŒè¯
```javascript
// åœ¨æ§åˆ¶å°ä¸­æµ‹è¯•
window.ImageConfigModal.show();
```

### 2. é…ç½®ä¿å­˜éªŒè¯
```javascript
// æ£€æŸ¥ä¿å­˜çš„é…ç½®æ˜¯å¦åŒ…å«backgroundPosition
console.log(window.styleConfigManager.currentConfig.messageSentAvatar);
// åº”è¯¥åŒ…å«: backgroundPosition: "50% 30%" (ç¤ºä¾‹å€¼)
```

### 3. CSSåº”ç”¨éªŒè¯
```javascript
// æ£€æŸ¥ç”Ÿæˆçš„CSSæ˜¯å¦æ­£ç¡®
const css = window.styleConfigManager.generateCSS();
console.log(css);
// åº”è¯¥åŒ…å«: background-position: 50% 30% !important;
```

### 4. å®é™…æ•ˆæœéªŒè¯
1. æ‰“å¼€å›¾ç‰‡é…ç½®å¼¹çª—
2. ä¸Šä¼ å¤´åƒå›¾ç‰‡
3. æ‹–æ‹½è°ƒæ•´ä½ç½®
4. ä¿å­˜é…ç½®
5. è¿›å…¥èŠå¤©è¯¦æƒ…é¡µ
6. éªŒè¯ç”¨æˆ·å¤´åƒä½ç½®æ˜¯å¦ä¸é¢„è§ˆä¸€è‡´

## å“åº”å¼é€‚é…

æ‰€æœ‰ä¿®æ”¹éƒ½ä¿æŒäº†å“åº”å¼è®¾è®¡ï¼š
- 480pxä»¥ä¸‹: ä¸­ç­‰å°ºå¯¸é¢„è§ˆ
- 360pxä»¥ä¸‹: å°å°ºå¯¸é¢„è§ˆ
- ä¿æŒæ¯”ä¾‹åè°ƒå’Œæ“ä½œä¾¿åˆ©æ€§

## åç»­ä¼˜åŒ–å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**: æ‹–æ‹½æ—¶å‡å°‘DOMæ›´æ–°é¢‘ç‡
2. **ç”¨æˆ·ä½“éªŒ**: æ·»åŠ ä½ç½®é‡ç½®æŒ‰é’®
3. **åŠŸèƒ½æ‰©å±•**: æ”¯æŒé¢„è®¾ä½ç½®å¿«æ·é€‰æ‹©
4. **é”™è¯¯å¤„ç†**: å®Œå–„å›¾ç‰‡åŠ è½½å¤±è´¥çš„å¤„ç†
